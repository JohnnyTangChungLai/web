<html>

<head>
    <meta charset="utf-8">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta content="width=device-width,initial-scale=1" name="viewport">
    <title>Yan Chai Hospital Lan Chi Pat Memorial Secondary School 仁濟醫院靚次伯紀念中學</title>
    <link rel="icon" href="image/favicon.png" type="image/png" sizes="45x45">

    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.css" rel="stylesheet">
    <link href="https://kit-pro.fontawesome.com/releases/v5.15.4/css/pro.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/owl.theme.default.min.css">
    <link rel="stylesheet" href="css/flexslider.css">
    <link href='css/fullcalendar.css' type="text/css" rel="stylesheet" />
    <link rel="stylesheet" href="css/slick.css">
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <!-- <link href="css/font-awesome.min.css" rel="stylesheet"> -->
    <link href="css/style.css" rel="stylesheet">
    <link href="css/style_adj.css" rel="stylesheet">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
    <script src="js/jquery.flexslider.js"></script>
    <script src="js/owl.carousel.js"></script>
    <script src="js/slick.min.js"></script>
    <script src="js/scripts.js"></script>

    <script src='js/main.js'></script>
    <script src='js/main2.js'></script>
    <script src='js/main3.js'></script>
    <style>
        #screen-container {
            display: inline-block;
            white-space: nowrap;
        }
    </style>
</head>

<body>
    <!-- From Johnny-->
    <div class="subpages wrapper">
        <div class="header pt-2">
            <div class="container">
                <div class="row">
                    <div class="logo col-md-10 col-10">
                        <a href='index.php'><img src="image/logo.png" alt=""></a>
                    </div>
                    <div class="social_toolbar col-md-2 col-2 d-none d-md-block">
                        <ul>
                            <li> <a class="toolbar_facebook" href="https://www.facebook.com/ychlcp" target="_blank"><i
                                        class="fab fa-facebook-f"></i></a></li>
                            <li> <a class="toolbar_youtube" href="https://www.youtube.com/user/YCHLCP/videos"
                                    target="_blank"><i class="fab fa-youtube"></i></a></li>
                            <li> <a class="toolbar_ig" href=" https://www.instagram.com/ychlcp/" target="_blank"><i
                                        class="fab fa-instagram"></i></a></li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="menu-item mt-2">
                <div class="container">
                    <div class="row">
                        <nav class="nav_area">

                            <label class="toggle" onclick=""><i class="fa fa-bars"></i></label>
                            <ul class="menu">

                                <!-- <li class="menu-item-has-children"><a href="index.php" >主頁</a>
                                <ul class="sub-menu">
                                <li class="menu-item-has-children"><a href="content.php">Sub Menu 1</a>
                                <ul class="sub-menu">
                                <li><a href="content.php">Sub Menu 1</a></li>
                                <li><a href="content.php">Sub Menu 2</a></li>
                                </ul>							
                                </li>
                                <li class="menu-item-has-children"><a href="content.php">Sub Menu 2</a>
                                <ul class="sub-menu">
                                <li><a href="content.php">Sub Menu 1</a></li>
                                <li><a href="content.php">Sub Menu 2</a></li>
                                </ul>							
                                </li>
                                </ul>
                                </li>

                                <li class="menu-item-has-children"><a href="content.php" > 學校資料  </a>
                                <ul class="sub-menu">
                                <li class="menu-item-has-children"><a href="content.php">Sub Menu 1</a>
                                <ul class="sub-menu">
                                <li><a href="content.php">Sub Menu 1</a></li>
                                <li><a href="content.php">Sub Menu 2</a></li>
                                </ul>

                                </li>
                                <li class="menu-item-has-children"><a href="content.php">Sub Menu 2</a>
                                <ul class="sub-menu">
                                <li><a href="content.php">Sub Menu 1</a></li>
                                <li><a href="content.php">Sub Menu 2</a></li>
                                </ul>

                                </li>
                                </ul>
                                </li>	

                                <li class="menu-item-has-children"><a href="content.php" >靚中師資 </a>
                                <ul class="sub-menu">
                                <li><a href="content.php">Sub Menu 1</a></li>
                                <li><a href="content.php">Sub Menu 2</a></li>
                                </ul>
                                </li>


                                <li class="menu-item-has-children"><a href="news.php" >靚中生活 </a>
                                <ul class="sub-menu">
                                <li><a href="news.php">Sub Menu 1</a></li>
                                <li><a href="news.php">Sub Menu 2</a></li>
                                </ul>
                                </li>					

                                <li class="menu-item-has-children"><a href="news.php"> 學生成績</a>
                                <ul class="sub-menu">
                                <li><a href="news.php">Sub Menu 1</a></li>
                                <li><a href="news.php">Sub Menu 2</a></li>
                                </ul>
                                </li>

                                <li class="menu-item-has-children"><a href="album.php"> 靚中相廊 </a>
                                <ul class="sub-menu">
                                <li><a href="album.php">Sub Menu 1</a></li>
                                <li><a href="album.php">Sub Menu 2</a></li>
                                </ul>
                                </li>

                                <li class="menu-item-has-children"><a href="content.php"> 家長天地 </a>
                                <ul class="sub-menu">
                                <li><a href="content.php">Sub Menu 1</a></li>
                                <li><a href="content.php">Sub Menu 2</a></li>
                                </ul>
                                </li>

                                <li class="menu-item-has-children"><a href="content.php">入學申請 </a>
                                <ul class="sub-menu">
                                <li><a href="content.php">Sub Menu 1</a></li>
                                <li><a href="content.php">Sub Menu 2</a></li>
                                </ul>
                                </li>

                                <li class="menu-item-has-children"><a href="content.php">內聯網</a>
                                <ul class="sub-menu">
                                <li><a href="content.php">Sub Menu 1</a></li>
                                <li><a href="content.php">Sub Menu 2</a></li>
                                </ul>
                                </li> -->
                                <li class=""><a href="index.php">主頁</a> </li>
                                <li class=" menu-item-has-children "><a href="content.php?wid=226">學校資料</a>
                                    <ul class="sub-menu">
                                        <li class=" menu-item-has-children "><a href="content.php?wid=226">學校簡介</a>
                                            <ul class="sub-menu">
                                                <li class=""><a href="content.php?wid=226">靚中背景</a></li>
                                                <li class=""><a href="content.php?wid=227">學校設施</a></li>
                                                <li class=""><a href="content.php?wid=228">學校位置</a></li>
                                                <li class=""><a href="content.php?wid=229">法團校董會</a></li>
                                                <li class=""><a href="content.php?wid=230">行政委員會</a></li>
                                                <li class=""><a href="content.php?wid=231">開設科目</a></li>
                                                <li class=""><a href="content.php?wid=232">班級結構</a></li>
                                                <li class=""><a href="content.php?wid=233">校歌</a></li>
                                                <li class=""><a href="calendar.php?wid=234">校曆表</a></li>
                                                <li class=""><a href="content.php?wid=235">獎學金</a></li>
                                                <li class=""><a href="content.php?wid=236">學生成長</a></li>
                                            </ul>
                                        </li>
                                        <li class=""><a href="content.php?wid=184">學校組織</a> </li>
                                        <li class=" menu-item-has-children "><a href="content.php?wid=223">校本管理</a>
                                            <ul class="sub-menu">
                                                <li class=""><a href="content.php?wid=223">周年計劃</a></li>
                                                <li class=""><a href="content.php?wid=224">學校報告</a></li>
                                                <li class=""><a href="content.php?wid=225">三年發展計劃</a></li>
                                            </ul>
                                        </li>
                                        <li class=""><a href="news.php?wid=186&cid=4">傳媒報道</a> </li>
                                        <li class=""><a href="content.php?wid=354">個人資料收集聲明</a> </li>
                                    </ul>
                                </li>
                                <li class=" menu-item-has-children "><a href="content.php?wid=217">靚中師資</a>
                                    <ul class="sub-menu">
                                        <li class=""><a href="content.php?wid=217">校長簡介</a> </li>
                                        <li class=" menu-item-has-children "><a href="content.php?wid=217">校長的話</a>
                                            <ul class="sub-menu">
                                                <li class=""><a href="content.php?wid=371">2023年9月</a></li>
                                                <li class=""><a href="content.php?wid=372">2023年9月4日</a></li>
                                            </ul>
                                        </li>
                                        <li class=""><a href="content.php?wid=368">歷任校長</a> </li>
                                        <li class=""><a href="content.php?wid=216">靚中老師</a> </li>
                                    </ul>
                                </li>
                                <li class=" menu-item-has-children "><a href="content.php?wid=212">靚中生活</a>
                                    <ul class="sub-menu">
                                        <li class=" menu-item-has-children "><a href="content.php?wid=212">中一、二、三規劃</a>
                                            <ul class="sub-menu">
                                                <li class=""><a href="content.php?wid=337">中一培訓計劃</a></li>
                                                <li class=""><a href="content.php?wid=212">中一步操</a></li>
                                                <li class=""><a href="content.php?wid=213">中一功輔班</a></li>
                                                <li class=""><a href="China_HK/index.html" target="_blank">中三級校本交流計劃</a>
                                                </li>
                                            </ul>
                                        </li>
                                        <li class=""><a href="https://www.lcp.edu.hk/YCH_STEAM_Faire/index.html"
                                                target="_blank">仁濟 STEAM FAIRE 2023</a> </li>
                                        <li class=""><a href="https://www.lcp.edu.hk/25th/" target="_blank">第二十六週年校慶</a>
                                        </li>
                                        <li class=" menu-item-has-children "><a href="content.php?wid=323">靚中活動</a>
                                            <ul class="sub-menu">
                                                <li class=""><a href="LCPMakerspace/index.html"
                                                        target="_blank">靚中「創客空間」</a></li>
                                                <li class=""><a href="Franco_Chinese/index.html"
                                                        target="_blank">中法學生交流計劃</a></li>
                                                <li class=""><a href="https://www.ychlpyss.edu.hk/lpy_invention2122.htm"
                                                        target="_blank">第八屆香港國際學生創新發明大賽</a></li>
                                                <li class=""><a href="Rummikub/index.html"
                                                        target="_blank">第十屆聯區Rummikub小學邀請賽</a></li>
                                                <li class=""><a href="https://www.lcp.edu.hk/20th/index.php"
                                                        target="_blank">二十週年校慶</a></li>
                                                <li class=""><a href="https://www.lcp.edu.hk/QTN/index.html"
                                                        target="_blank">「小點子，大攪作」STEM創客教育中心</a></li>
                                                <li class=""><a href="https://www.lcp.edu.hk/VoiceBook/index.html"
                                                        target="_blank">靚聲好書</a></li>
                                            </ul>
                                        </li>
                                        <li class=""><a href="https://www.lcp.edu.hk/Library/index.html"
                                                target="_blank">蔡百泰圖書館</a> </li>
                                        <li class=""><a href="news.php?wid=209&cid=5">學校通告</a> </li>
                                        <li class=""><a href="news.php?wid=210&cid=6">校訊</a> </li>
                                        <li class=""><a href="content.php?wid=211">學會活動</a> </li>
                                        <li class=""><a href="content.php?wid=347">青少年愛國情懷與國民教育宣傳片</a> </li>
                                    </ul>
                                </li>
                                <li class=" menu-item-has-children "><a href="content.php?wid=237">學生成績</a>
                                    <ul class="sub-menu">
                                        <li class=" menu-item-has-children "><a href="content.php?wid=237">得獎消息</a>
                                            <ul class="sub-menu">
                                                <li class=""><a href="content.php?wid=350">2022-2023年度</a></li>
                                                <li class=""><a href="content.php?wid=327">2021-2022年度</a></li>
                                                <li class=""><a href="content.php?wid=237">2020-2021年度</a></li>
                                                <li class=""><a href="content.php?wid=319">2019-2020年度</a></li>
                                                <li class=""><a href="content.php?wid=320">2018-2019年度</a></li>
                                            </ul>
                                        </li>
                                        <li class=" menu-item-has-children "><a href="content.php?wid=238">考試龍虎榜</a>
                                            <ul class="sub-menu">
                                                <li class=""><a href="content.php?wid=351">2022 - 2023 年度</a></li>
                                                <li class=""><a href="content.php?wid=321">2021-2022年度</a></li>
                                                <li class=""><a href="content.php?wid=238">2020-2021年度</a></li>
                                                <li class=""><a href="content.php?wid=240">2019-2020年度</a></li>
                                            </ul>
                                        </li>
                                        <li class=""><a href="content.php?wid=199">學生作品</a> </li>
                                    </ul>
                                </li>
                                <li class=""><a href="album.php?wid=179&cid=5">靚中相廊</a> </li>
                                <li class=" menu-item-has-children "><a href="content.php?wid=195">家長天地</a>
                                    <ul class="sub-menu">
                                        <li class=""><a href="https://www.lcp.edu.hk/PTA/index.html"
                                                target="_blank">家長教師會</a> </li>
                                        <li class=""><a href="content.php?wid=196">家教會委員名單</a> </li>
                                    </ul>
                                </li>
                                <li class=" menu-item-has-children "><a href="content.php?wid=191">入學申請</a>
                                    <ul class="sub-menu">
                                        <li class=""><a href="content.php?wid=191">中一自行分配學位</a> </li>
                                        <li class=""><a href="content.php?wid=192">中六入學申請</a> </li>
                                        <li class=""><a href="/attachment/upload/files/admission_form_LCP.pdf"
                                                target="_blank">各級入學申請</a> </li>
                                        <li class=""><a href="content.php?wid=194">獎學金</a> </li>
                                    </ul>
                                </li>
                                <li class=" menu-item-has-children "><a href="content.php?wid=187">內聯網</a>
                                    <ul class="sub-menu">
                                        <li class=""><a href="http://intranet.lcp.edu.hk/it-school/"
                                                target="_blank">登入內聯網</a> </li>
                                        <li class=""><a href="https://login.microsoftonline.com/"
                                                target="_blank">登入Office 365</a> </li>
                                        <li class=""><a href="content.php?wid=189">內聯網使用守則</a> </li>
                                        <li class=""><a href="https://www.lcp.edu.hk/school.php"
                                                target="_blank">校內有用連接</a> </li>
                                    </ul>
                                </li>
                            </ul>
                        </nav>
                        <div class="icon">
                            <img src="image/menu-icon.png">
                        </div>
                    </div>
                </div>
            </div>

        </div>
        <div class="main">
            <div class="container">
                <div class="line">
                    <div class="row">
                        <div class="col-md-12 s-calender">
                            <h3><img src="image/arrow.png" class="pr-3">安心睡</h2>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                        <div class="webpage-content cms_content pt-3">
                        </div>
                        <!-- <div class="row justify-content-center">
                        <div class="col-md-10">

                            <div class="text-right py-5 mt-4">
                                <a href="#" class="back">返回</a>
                            </div>
                        </div>
                    </div> -->
                    </div>
                </div>

            </div>




            <!-- -->
            <div style="width: 920px; margin:auto !important;">

                <!--
   <h2 class="text-center" style="margin-bottom:0px;"><strong>校內有用連接 <br>
 -->
                </strong> </h2>



                <!-- 安心睡 -->


                <div>安心睡</div>
                <p><button onclick="init()" type="button">Start</button><button onclick="stop_play()"
                        type="button">Stop</button></p>

                <p><button onclick="take_photo()" type="button">Take a Photo</button> <button onclick="clean()"
                        type="button">Clean</button> </p>

                <p>
                    <select name="timer" id="timer">
                        <option value="2000">2秒</option>
                        <option value="5000">5秒</option>
                        <option value="10000">10秒</option>
                        <option value="20000">20秒</option>
                        <option value="30000">30秒</option>
                        <option value="60000">60秒</option>
                    </select>
                    <button id="timer_button" onclick="set_timer()">Set Time</button>
                </p>


                <div id="webcam-container">&nbsp;</div>

                <div id="label-container">&nbsp;</div>

                <div id="screen-container" class="screen-container"> </div>

                <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@1.3.1/dist/tf.min.js"></script>
                <script
                    src="https://cdn.jsdelivr.net/npm/@teachablemachine/image@0.8/dist/teachablemachine-image.min.js"></script>
                <script type="text/javascript">
                    // More API functions here:
                    // https://github.com/googlecreativelab/teachablemachine-community/tree/master/libraries/image

                    // the link to your model provided by Teachable Machine export panel //Htx8JBhYr //cfPv48TGv
                    const URL = "https://teachablemachine.withgoogle.com/models/cfPv48TGv/";

                    var flag = false;
                    var init_flag = false;
                    var audio = new Audio();
                    let model, webcam, labelContainer, maxPredictions;
                    var timer = 10000;
                    var intervalId;

                    let isIos = false;
                    // fix when running demo in ios, video will be frozen;
                    if (window.navigator.userAgent.indexOf('iPhone') > -1 || window.navigator.userAgent.indexOf('iPad') > -1) {
                        isIos = true;
                        console.log("is Ios");
                        audio.autoplay = true;
                        audio.muted = false;
                        audio.src = "https://www.lcp.edu.hk/sleep/Sleep.mp3";
                    }
                    else {
                        console.log("is not Ios");
                        audio.src = "https://www.lcp.edu.hk/sleep/Sleep.mp3";
                    }

                    // Load the image model and setup the webcam
                    async function init() {
                        
                        if (!init_flag) {
                            audio.play();
                            const modelURL = URL + "model.json";
                            const metadataURL = URL + "metadata.json";

                            // load the model and metadata
                            // Refer to tmImage.loadFromFiles() in the API to support files from a file picker
                            // or files from your local hard drive
                            // Note: the pose library adds "tmImage" object to your window (window.tmImage)
                            model = await tmImage.load(modelURL, metadataURL);
                            maxPredictions = model.getTotalClasses();

                            // Convenience function to setup a webcam
                            const flip = true; // whether to flip the webcam
                            webcam = new tmImage.Webcam(400, 400, flip); // width, height, flip
                            //await webcam.setup(); // request access to the webcam
                            await webcam.setup({ facingMode: "environment", frameRate: 60 });


                            // append elements to the DOM
                            if (isIos) {

                                webcam.webcam.setAttribute("id", "camera");
                                document.getElementById("webcam-container").appendChild(webcam.webcam); // webcam object needs to be added in any case to make this work on iOS
                                // grab video-object in any way you want and set the attributesm
                                const webCamVideo = document.getElementsByTagName("video")[0];
                                webCamVideo.setAttribute("playsinline", true); // written with "setAttribute" bc. iOS buggs otherwise
                                webCamVideo.muted = "true";
                                webCamVideo.style.width = 400 + "px";
                                webCamVideo.style.height = 400 + "px";

                            } else {

                                webcam.canvas.setAttribute("id", "camera");
                                document.getElementById("webcam-container").appendChild(webcam.canvas);

                            }
                            await webcam.play();
                            window.requestAnimationFrame(loop);
                            labelContainer = document.getElementById("label-container");
                            for (let i = 0; i < maxPredictions; i++) { // and class labels
                                labelContainer.appendChild(document.createElement("div"));
                            }
                            init_flag = true;
                            intervalId = setInterval(timerLoop, timer); // Executes the function

                        }
                    }

                    async function loop() {
                        webcam.update(); // update the webcam frame
                        await predict();
                        window.requestAnimationFrame(loop);
                        if (flag) {
                            //if (isIos){
                              //audio.src = "https://www.lcp.edu.hk/sleep/Sleep.mp3";
                            //}
                            audio.play();

                        }

                    }

                    // run the webcam image through the image model
                    async function predict() {
                        let prediction;
                        // predict can take in an image, video or canvas html element
                        if (isIos) {
                            prediction = await model.predict(webcam.webcam);
                        } else {
                            prediction = await model.predict(webcam.canvas);
                        }
                        for (let i = 0; i < prediction.length; i++) {
                            const classPrediction = prediction[i].className + ": " + prediction[i].probability.toFixed(2);
                            labelContainer.childNodes[i].innerHTML = classPrediction;
                        }
                        if (prediction[1].probability.toFixed(2) > 0.7 || prediction[4].probability.toFixed(2) > 0.7) {
                            flag = true;
                        }
                    }

                    async function stop_play() {
                        audio.pause();
                        flag = false;
                    }

                    async function take_photo() {
                        var can;
                        var video;
                        if (isIos) {
                            can = document.createElement('canvas');
                            video = document.getElementById('camera');
                            can.width = video.videoWidth * 0.5;
                            can.height = video.videoHeight * 0.5;
                            can.getContext('2d').drawImage(video, 0, 0, can.width, can.height);
                        }
                        else {
                            can = document.getElementById('camera');
                            can.getContext('2d').drawImage(can, 0, 0, can.width, can.height);
                        }
                        let image_data_url = can.toDataURL('image/jpeg');
                        const img = document.createElement("img");
                        img.src = image_data_url;
                        document.getElementById('screen-container').appendChild(img);

                        // data url of the image
                        console.log(image_data_url);
                    }

                    async function set_timer() {
                        if (document.getElementById("timer").value == "" || document.getElementById("timer").value <= 0) {

                        } else {
                            clearInterval(intervalId);
                            var new_timer = document.getElementById("timer").value;
                            console.log(new_timer);
                            intervalId = setInterval(timerLoop, new_timer); // Executes the function
                        }
                    }

                    async function timerLoop() {
                        if (init_flag) {
                            console.log("Image Taking...");
                            // Add your desired code here
                            take_photo();
                            console.log("Image Taken");
                        }

                    }

                    async function clean() {
                        document.getElementById("screen-container").innerHTML = "";
                        console.log("Image Clean");
                    }


                </script>


            </div>

            <!-- 安心睡- END -->



        </div>


    </div>

    <script>
    </script>
</body>

</html>
